<audio #audioPlayer [src]="currentSong?.url" [volume]="volume"></audio>

<div class="container font-rem-1_25">
	<div class="row">
		<div class="col-12 color-white">
			<h1>Block Party</h1>
			<div class="spectrum"></div>
			<div class="mt-4 background-color-gray px-4 py-3 rounded">
				<div class="row position-relative">
					<div #overlayContainer [@fadeInOut]="overlay() ? 'visible' : 'void'" class="col-12 background-color-gray overlay-container d-flex justify-content-center">
						<div class="mt-4 mb-3 d-flex justify-content-center flex-column align-items-center">
							<ng-container *ngIf="!joined">
								<div class="bg-primary font-rem-4_75 ratio ratio-1x1 icon-container" [ngClass]="{'cursor-pointer': !joined}">
									<i class="bi bi-play-fill d-flex justify-content-center align-items-center pl-1" (click)="join()"></i>
								</div>
								<div class="font-rem-2_25 mt-3 fw-medium">Click to start the music!</div>
							</ng-container>
							<ng-container *ngIf="joined && reconnecting">
								<spinner></spinner>
								<div class="font-rem-2_25 mt-3 fw-medium">Reconnecting...</div>
							</ng-container>
						</div>
					</div>
					<div class="col-12 col-lg-7 d-flex align-items-center">
						<div class="w-100">
							<div *ngIf="!currentSong">
								<div class="font-rem-2_5 fw-bold">Not currently playing...</div>
								<div class="font-rem-1_75 mt-2">Waiting for the game to start,<br class="d-none d-lg-block"> prepare your feet</div>
							</div>
							<div *ngIf="currentSong">
								<div class="font-rem-3 fw-bold">{{currentSong.title}}</div>
								<div class="font-rem-2_5 fw-medium">{{currentSong.artist}}</div>
							</div>

							<div class="mt-3 mt-lg-5">
								<label for="volume">Volume</label>
								<div class="background-color-dark-gray px-2 py-1 mt-1" style="border-radius: 20px">
									<input #volumeControl id="volume" type="range" min="0" max="1" [value]="volume" step=".01" (change)="updateVolume()">
								</div>
							</div>
						</div>
					</div>
					<div class="col-12 col-lg-5 p-4 px-md-8 px-lg-4 mt-2 mt-lg-0">
						<div class="image-container">
							<img class="w-100" [src]="'blockparty/GRAY_CONCRETE_POWDER.png' | cmsImage">
							<img *ngIf="block" class="w-100" [src]="'blockparty/' + block + '.png' | cmsImage">
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
